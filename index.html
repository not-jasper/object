<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>ThisObjectDoesNotExist</title>
  <script src="https://cdn.jsdelivr.net/npm/@xenova/transformers@3.1.0/dist/transformers.min.js"></script>
</head>
<body style="margin:0;overflow:hidden;display:flex;align-items:center;justify-content:center;height:100vh;width:100vw;background:#000;">
  <img id="out" alt="generated object" style="max-width:100%;max-height:100%;object-fit:contain;">
  <script>
    (async () => {
      window.env = { BACKENDS: ["webgpu","wasm"], CACHE_DIR: "tfjs-cache" };
      const { pipeline } = window.transformers;
      const pipe = await pipeline("text-to-image", "deepseek-ai/Janus-1.3B");
      const result = await pipe("a random everyday object", { width:512, height:512, num_inference_steps:2 });
      let blob, img = result.images?.[0];
      if (img instanceof Blob) blob = img;
      else if (img instanceof ImageBitmap) {
        const c = document.createElement("canvas");
        c.width = img.width; c.height = img.height;
        c.getContext("2d").drawImage(img,0,0);
        blob = await new Promise(r => c.toBlob(r,"image/png"));
      } else if (img instanceof HTMLImageElement) {
        const r = await fetch(img.src);
        blob = await r.blob();
      } else if (result.toDataURL) {
        const r = await fetch(result.toDataURL());
        blob = await r.blob();
      }
      if (blob) document.getElementById("out").src = URL.createObjectURL(blob);
    })();
  </script>
</body>
</html>
